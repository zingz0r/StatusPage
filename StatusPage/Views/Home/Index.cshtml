@using StatusCake.Client.Models
@model IEnumerable<Test>

@{
    ViewData["Title"] = "Status";
}

<h2>TothNET Status</h2>
<div class="table-responsive">
    <!--Table-->
    <table id="tablePreview" class="table table-striped table-borderless table-hover">
        <!--Table head-->
        <thead>
            <tr>
                @*<th>#</th>*@
                <th>Website name</th>
                <th>Status</th>
                <th style="width: 70%">Uptime</th>
            </tr>
        </thead>
        <!--Table head-->
        <!--Table body-->
        <tbody>
            @foreach (var item in Model)
            {
                var color = "";

                if (item.Uptime == 100)
                {
                    color = "bg-success";
                }
                else if (item.Uptime > 40)
                {
                    color = "bg-warning";
                }
                else
                {
                    color = "bg-danger";
                }

                var trStyle = "";
                bool isDown = item.Status == "Down";
                if (isDown)
                {
                    trStyle = "class=table-danger";
                }
                
                <tr @trStyle>
                    @*<th scope="row">@item.TestID</th>*@
                    <td>@item.WebsiteName</td>
                    <td>
                        @if (isDown)
                        {
                            <span class="badge badge-danger">Down</span>
                        }
                        else
                        {
                            <span class="badge badge-success">Operational</span>
                        }
                    </td>
                    <td>
                        <div class="progress" style="height: 20px;">
                            <div class="progress-bar @color" role="progressbar" style="width: 100%" aria-valuenow="@item.Uptime" aria-valuemin="0" aria-valuemax="100">@item.Uptime%</div>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
        <!--Table body-->
    </table>
    <!--Table-->
</div>